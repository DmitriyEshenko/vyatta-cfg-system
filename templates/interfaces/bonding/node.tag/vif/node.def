tag:
type: u32
help: Set Virtual Local Area Network (VLAN) ID
syntax:expression: $VAR(@) >= 0 && $VAR(@) <= 4094; "VLAN ID must be between 0 and 4094"
create: read flags < /sys/class/net/$VAR(../@)/flags
	if [ $(( flags & 1 )) -eq 0 ]
	then
		echo "Can not create VLAN on disabled interface: " $VAR(../@)
		exit 1
	fi
        sudo ip link add link $VAR(../@) name "$VAR(../@).$VAR(@)" type vlan id $VAR(@) || exit 1
        sudo ip link set "$VAR(../@).$VAR(@)" up
	sudo sh -c "/opt/vyatta/sbin/vyatta-link-detect $VAR(../@).$VAR(@) on"
delete: sudo ip link delete dev "$VAR(../@).$VAR(@)" type vlan id $VAR(@)
comp_help: possible completions:
 <0-4094>           Set VLAN ID
